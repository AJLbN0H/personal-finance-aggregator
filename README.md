# Personal Finance Aggregator

Профессиональная утилита для анализа личных финансов. Приложение агрегирует данные из банковских выписок (Excel), сопоставляет их с курсами валют ЦБ РФ и котировками акций, формируя итоговый JSON-отчет.

## Стек технологий
* **Core:** Python 3.12+
* **Data Analysis:** Pandas (обработка транзакций и фильтрация)
* **API & Интеграции:** * Requests (получение курсов валют в формате XML с cbr.ru)
  * Интеграция с котировками акций S&P 500
* **Quality Control:** * Pytest (Unit-тестирование с использованием Mocks и Patching)
  * Logging (настроенное логирование для каждого модуля: reports, services, utils, views)
* **Tools:** Typing (TypedDict, ParamSpec), Python-dotenv

## Функционал
* **Агрегация данных:** Сбор информации по картам, расчет общего расхода и кэшбэка.
* **Система отчетов:** Генерация отчетов по категориям трат за последние 3 месяца с автоматическим сохранением в JSON через декоратор.
* **Умный поиск:** Поиск переводов физическим лицам с использованием регулярных выражений (Regex).
* **Конвертация:** Автоматический парсинг актуальных курсов валют с сайта Центробанка.
* **Персонализация:** Настройки валют и отслеживаемых акций через `user_settings.json`.

## Модули системы
* `views.py` — Главный контроллер, формирующий итоговую страницу данных.
* `reports.py` — Логика формирования отчетов и декоратор для записи в файлы.
* `services.py` — Сервисные функции (поиск транзакций, фильтрация).
* `utils.py` — Вспомогательные утилиты для работы с Excel, XML и внешними API.

## Тестирование
Проект покрыт тестами на 80%+. Для запуска тестов:
```pytest```

## Установка
1. Клонируйте репозиторий.

2. Создайте файл .env и укажите необходимые API-ключи (.env.example).

3. Установите зависимости через Poetry или pip: ```pip install -r requirements.txt```
